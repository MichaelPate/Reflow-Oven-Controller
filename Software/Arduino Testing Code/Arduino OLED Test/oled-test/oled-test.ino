/**
 * This program is to play with the OLED and get a feel for what the UI will look like.
 * 
 * It is heavily inspired by the ssd1306_128x64_i2c.ino program provided by Adafruit.
 * 
 * Created by Michael Pate on October 26, 2025
 * v1.0
 */

#include <Adafruit_GFX.h>
#include <Adafruit_SSD1306.h>
#include <Wire.h>

#define SCREEN_WIDTH 128
#define SCREEN_HEIGHT 64

#define OLED_RESET     -1 // Reset pin # (or -1 if sharing Arduino reset pin)
#define SCREEN_ADDRESS 0x3C // Our OLED has address 0x3C, confirmed by I2C scanner program
Adafruit_SSD1306 display(SCREEN_WIDTH, SCREEN_HEIGHT, &Wire, OLED_RESET);

#define LOGO_HEIGHT 51
#define LOGO_WIDTH 64
const unsigned char mtp_logo_64x51 [] PROGMEM = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x3f, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1f, 0xff, 0xff, 0xf0, 0x00, 0x00, 
  0x00, 0x0f, 0xff, 0xff, 0xff, 0xff, 0xe0, 0x00, 0x03, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xc0, 
  0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xc0, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xc0, 
  0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xc0, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xc0, 
  0x07, 0xff, 0xf8, 0x3f, 0xf8, 0x3f, 0xff, 0xc0, 0x03, 0xc0, 0x00, 0x3f, 0xf8, 0x00, 0x07, 0x80, 
  0x00, 0x00, 0x00, 0x3f, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1f, 0xf8, 0x00, 0x00, 0x00, 
  0x00, 0xc0, 0x7f, 0x9f, 0xfb, 0xff, 0xfe, 0x00, 0x07, 0xf8, 0xff, 0x9f, 0xfb, 0xff, 0xff, 0x80, 
  0x07, 0xff, 0xff, 0x9f, 0xfb, 0xff, 0xff, 0x80, 0x07, 0xff, 0xff, 0x9f, 0xfb, 0xfe, 0xff, 0xc0, 
  0x07, 0xff, 0xff, 0x9f, 0xfb, 0xfc, 0x1f, 0xc0, 0x07, 0xff, 0xff, 0x9f, 0xfb, 0xfc, 0x1f, 0xc0, 
  0x07, 0xff, 0xff, 0x9f, 0xfb, 0xfc, 0x1f, 0xc0, 0x07, 0xff, 0xff, 0x9f, 0xfb, 0xfc, 0x1f, 0xc0, 
  0x07, 0xff, 0xff, 0x9f, 0xfb, 0xff, 0xff, 0xc0, 0x07, 0xf7, 0xbf, 0x9f, 0xfb, 0xff, 0xff, 0x80, 
  0x07, 0xf0, 0x3f, 0x9f, 0xfb, 0xff, 0xff, 0x80, 0x07, 0xf0, 0x3f, 0x9f, 0xfb, 0xff, 0xfe, 0x00, 
  0x07, 0xf0, 0x3f, 0x9f, 0xfb, 0xfc, 0x00, 0x00, 0x07, 0xf0, 0x3f, 0x9f, 0xfb, 0xfc, 0x00, 0x00, 
  0x07, 0xf0, 0x3f, 0x9f, 0xfb, 0xfc, 0x00, 0x00, 0x07, 0xf0, 0x3f, 0x9f, 0xfb, 0xfc, 0x00, 0x00, 
  0x07, 0xf0, 0x3f, 0x9f, 0xfb, 0xfc, 0x00, 0x00, 0x07, 0xf0, 0x3f, 0x9f, 0xfb, 0xfc, 0x00, 0x00, 
  0x07, 0xf0, 0x3f, 0x9f, 0xfb, 0xfc, 0x00, 0x00, 0x07, 0xf0, 0x3f, 0x9f, 0xfb, 0xfc, 0x00, 0x00, 
  0x07, 0xf0, 0x3f, 0x9f, 0xfb, 0xfc, 0x00, 0x00, 0x07, 0xf0, 0x3f, 0x9f, 0xfb, 0xfc, 0x00, 0x00, 
  0x07, 0xf0, 0x3f, 0x9f, 0xfb, 0xfc, 0x00, 0x00, 0x07, 0xf0, 0x3f, 0x9f, 0xfb, 0xfc, 0x00, 0x00, 
  0x07, 0xf0, 0x3f, 0x9f, 0xfb, 0xfc, 0x00, 0x00, 0x07, 0xf0, 0x3f, 0x9f, 0xfb, 0xfc, 0x00, 0x00, 
  0x07, 0xf0, 0x3f, 0x9f, 0xfb, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x3f, 0x9f, 0xfb, 0xfc, 0x00, 0x00, 
  0x00, 0x00, 0x3f, 0x9f, 0xfb, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1f, 0xf8, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

void setup() {
////////////////////////////////////////////////////////////////////////////////////////////////////////
  // OLED initialization and clearing
  Serial.begin(9600);

  // SSD1306_SWITCHCAPVCC = generate display voltage from 3.3V internally
  if(!display.begin(SSD1306_SWITCHCAPVCC, SCREEN_ADDRESS)) {
    Serial.println(F("SSD1306 allocation failed"));
    for(;;); // Don't proceed, loop forever
  }

  display.clearDisplay();
  display.display();
  delay(2000);
////////////////////////////////////////////////////////////////////////////////////////////////////////
/**
  // Draw the homescreen

  // Show temperatures, cycle time, a border around the display
  
  // Status Banner
  display.fillRect(0, 55, 128, 20, SSD1306_WHITE);     // x, y, width, height
  display.setTextSize(1);
  display.setTextColor(SSD1306_BLACK);
  display.setCursor((display.width() - getTextWidth(7)) / 2, 56);
  //display.print(F("OVEN HOT"));
  display.print(F("Cooling"));   // current cycle step    Warmup, soak, reflow, Cooling, Idle
  display.setCursor(1, 56);
  display.print(F("00:00"));     // current cycle time
  display.setCursor(98,56);
  display.print(F("00:00"));     // time remaining

  // Temperature Banner
  display.setTextSize(1);
  display.setTextColor(SSD1306_WHITE);
  display.setCursor(0,47);
  display.print(F("T:203.4 C"));                          //chamber temperature
  display.setCursor(68, 47);
  display.print(F("SP:210.0 C"));                        // terget temperature
  display.drawRect(44, 47, 3, 3, SSD1306_WHITE);         //degree symbol for chamber temp
  display.drawRect(118, 47, 3, 3, SSD1306_WHITE);        // degree symbol for target temp
  display.fillRect(57, 47, 7,7, SSD1306_WHITE);           // this symbol is shown when the heating element is turned on

  // 

  
  display.display();
  **/
  //for(;;);
////////////////////////////////////////////////////////////////////////////////////////////////////////
  // Draw the MTP logo
  display.drawBitmap(
    (display.width()  - LOGO_WIDTH ) / 2,           // centered horizontally
    //(display.height() - LOGO_HEIGHT) / 2,           // this is centered vertically
    -2,                                                // but I want it at the top instead. Choose -2 because the bitmap has a border around it
    mtp_logo_64x51, LOGO_WIDTH, LOGO_HEIGHT, 1);
  //display.display();

  // And the title text under it
  display.setTextSize(1);
  display.setTextColor(SSD1306_WHITE);
  display.setCursor(0,0);                           // setCursor(col or x, row or y)
  display.print(F("v1.0"));              
  display.setCursor((display.width() - getTextWidth(11)) / 2, 46);
  display.print(F("Toaster-Flo"));
  display.setCursor((display.width() - getTextWidth(17)) / 2, 55);
  display.print(F("Michael Pate 2025"));

  display.display();
////////////////////////////////////////////////////////////////////////////////////////////////////////
}

// For size 1 text only!
int getTextWidth(int numChars)
{
  // font is 5px wide and 7px tall, with 1px between characters
  return (5 * numChars) + (numChars - 1);
}

void loop() {
  // put your main code here, to run repeatedly:

}
